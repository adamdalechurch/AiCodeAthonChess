<!--
    Chess
    step 1: create a board, and assign pieces to default positions
    step 2: create a function to move pieces
    step 3: create a function to check if a move is valid
-->
<html>
<head>
    <title>Chess</title>
    <style>
        #board{
            width: 400px;
            height: 400px;
            border: 1px solid black;
        }
        .row{
            width: 100%;
            height: 12.5%;
        }
        .square{
            width: 12.5%;
            height: 100%;
            float: left;
        }
        .white{
            background-color: white;
        }
        .black{
            background-color: black;
        }
    </style>
</head>
<body>
    <div id="board">
    </div>
<script>
    const backRank = ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'];
    const pawnRank = ['P', 'P', 'P', 'P', 'P', 'P', 'P', 'P'];

    const board = new Board();
    board.create();
    function Board(){
        this.element = document.getElementById('board');
        this.squares = [];

        this.create = function(){
            for(let i = 0; i < 8; i++){
                let row = document.createElement('div');
                row.className = 'row';
                for(let j = 0; j < 8; j++){
                    let piece = null;

                    if(i == 0)
                        piece = new Piece(j, i, 'black', backRank[j]);
                    else if(i == 1)
                        piece = new Piece(j, i, 'black', pawnRank[j]);
                    else if(i == 6)
                        piece = new Piece(j, i, 'white', pawnRank[j]);
                    else if(i == 7)
                        piece = new Piece(j, i, 'white', backRank[j]);

                    let square = new Square(j, i, piece);
                    row.appendChild(square.element);
                    this.squares.push(square);
                }
                this.element.appendChild(row);
            }
        }
    }

    function Square(x, y, piece = null){
        this.x = x;
        this.y = y;
        this.piece = null;
        this.selected = false;
        this.element = document.createElement('div');
        this.element.className = 'square';
        if((x + y) % 2 == 0)
            this.element.className += ' white';
        else
            this.element.className += ' black';

        if(piece != null){
            this.piece = piece;
            this.element.appendChild(piece.element);
        }
    }

    function Piece(x, y, color, type){
        this.x = x;
        this.y = y;
        this.color = color;
        this.type = type;
        this.element = document.createElement('span');
        this.element.className = 'piece' + ' ' + color;

        //make it blue for now
        this.element.style.color = 'blue';
        this.element.innerHTML = type;
    }
    
</script>
</body>